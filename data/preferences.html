<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preferences Configuration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 400px;
            margin: 20px auto;
        }
        h1 {
            text-align: center;
        }
        form {
            display: grid;
            gap: 10px;
        }
        label {
            font-weight: bold;
        }
        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>Preferences Configuration</h1>

<form id="preferencesForm">
    <!-- Calibration Group -->
    <fieldset>
        <legend>Calibration</legend>
        <label for="customCalibrationValue">Custom Calibration Value:</label>
        <input type="number" id="customCalibrationValue" name="customCalibrationValue">
    </fieldset>

    <!-- Temperature Group -->
    <fieldset>
        <legend>Temperature</legend>
        <label for="tempOffset">Temperature Offset:</label>
        <input type="number" step="0.1" id="tempOffset" name="tempOffset">
        <label for="showFahrenheit">Show Fahrenheit:</label>
        <input type="checkbox" id="showFahrenheit" name="showFahrenheit">
    </fieldset>

    <!-- Altitude Group -->
    <fieldset>
        <legend>Altitude</legend>
        <label for="altitudeMeters">Altitude (meters):</label>
        <input type="number" id="altitudeMeters" name="altitudeMeters">
    </fieldset>

    <!-- Auto Calibration Group -->
    <fieldset>
        <legend>Auto Calibration</legend>
        <label for="autoSelfCalibration">Auto Self Calibration:</label>
        <input type="checkbox" id="autoSelfCalibration" name="autoSelfCalibration">
    </fieldset>

    <!-- CO2 Ranges Group -->
    <fieldset>
        <legend>CO2 Ranges</legend>
        <label for="co2OrangeRange">CO2 Orange Range:</label>
        <input type="number" id="co2OrangeRange" name="co2OrangeRange">
        <label for="co2RedRange">CO2 Red Range:</label>
        <input type="number" id="co2RedRange" name="co2RedRange">
    </fieldset>

    <!-- Display Brightness Group -->
    <fieldset>
        <legend>Display Brightness</legend>
        <label for="displayBrightness">Display Brightness:</label>
        <input type="number" id="displayBrightness" name="displayBrightness">
    </fieldset>

    <!-- NeoPixel Group -->
    <fieldset>
        <legend>NeoPixel</legend>
        <label for="neopixelBrightness">NeoPixel Brightness:</label>
        <input type="number" id="neopixelBrightness" name="neopixelBrightness">
        <label for="selectedNeopixelType">Selected NeoPixel Type:</label>
        <input type="number" id="selectedNeopixelType" name="selectedNeopixelType">
    </fieldset>

    <!-- Connectivity Group -->
    <fieldset>
        <legend>Connectivity</legend>
        <label for="activeBLE">Active BLE:</label>
        <input type="checkbox" id="activeBLE" name="activeBLE">
        <label for="activeWIFI">Active WIFI:</label>
        <input type="checkbox" id="activeWIFI" name="activeWIFI">
        <label for="activeMQTT">Active MQTT:</label>
        <input type="checkbox" id="activeMQTT" name="activeMQTT">
        <label for="activeESPNOW">Active ESPNOW:</label>
        <input type="checkbox" id="activeESPNOW" name="activeESPNOW">
    </fieldset>

    <!-- Root Topic Group -->
    <fieldset>
        <legend>Root Topic</legend>
        <label for="rootTopic">Root Topic:</label>
        <input type="text" id="rootTopic" name="rootTopic">
    </fieldset>

    <!-- Battery Group -->
    <fieldset>
        <legend>Battery</legend>
        <label for="batteryDischargedMillivolts">Battery Discharged Millivolts:</label>
        <input type="number" id="batteryDischargedMillivolts" name="batteryDischargedMillivolts">
        <label for="batteryFullyChargedMillivolts">Battery Fully Charged Millivolts:</label>
        <input type="number" id="batteryFullyChargedMillivolts" name="batteryFullyChargedMillivolts">
    </fieldset>

    <!-- VRef Group -->
    <fieldset>
        <legend>VRef</legend>
        <label for="vRef">VRef:</label>
        <input type="number" id="vRef" name="vRef">
    </fieldset>

    <!-- MQTT Credentials Group -->
    <fieldset>
        <legend>MQTT Credentials</legend>
        <label for="mqttClientId">MQTT Client ID:</label>
        <input type="text" id="mqttClientId" name="mqttClientId">
        <label for="mqttBroker">MQTT Broker:</label>
        <input type="text" id="mqttBroker" name="mqttBroker">
        <label for="mqttUser">MQTT User:</label>
        <input type="text" id="mqttUser" name="mqttUser">
        <label for="mqttPass">MQTT Password:</label>
        <input type="password" id="mqttPass" name="mqttPass">
    </fieldset>

    <!-- Time Settings Group -->
    <fieldset>
        <legend>Time Settings</legend>
        <label for="timeToDisplayOff">Time to Display Off (seconds):</label>
        <input type="number" id="timeToDisplayOff" name="timeToDisplayOff">
        <label for="timeBetweenMQTTPublish">Time Between MQTT Publish (seconds):</label>
        <input type="number" id="timeBetweenMQTTPublish" name="timeBetweenMQTTPublish">
        <label for="timeBetweenESPNowPublish">Time Between ESPNOW Publish (seconds):</label>
        <input type="number" id="timeBetweenESPNowPublish" name="timeBetweenESPNowPublish">
        <label for="timeToKeepAliveMQTT">Time to Keep Alive MQTT (seconds):</label>
        <input type="number" id="timeToKeepAliveMQTT" name="timeToKeepAliveMQTT">
        <label for="timeToKeepAliveESPNow">Time to Keep Alive ESPNOW (seconds):</label>
        <input type="number" id="timeToKeepAliveESPNow" name="timeToKeepAliveESPNow">
    </fieldset>

    <!-- Display Off on External Power Group -->
    <fieldset>
        <legend>Display Off on External Power</legend>
        <label for="displayOffOnExternalPower">Display Off on External Power:</label>
        <input type="checkbox" id="displayOffOnExternalPower" name="displayOffOnExternalPower">
    </fieldset>

    <!-- WiFi Credentials Group -->
    <fieldset>
        <legend>WiFi Credentials</legend>
        <label for="wifiSSID">WiFi SSID:</label>
        <input type="text" id="wifiSSID" name="wifiSSID">
        <label for="wifiPass">WiFi Password:</label>
        <input type="password" id="wifiPass" name="wifiPass">
    </fieldset>

    <!-- Host Name Group -->
    <fieldset>
        <legend>Host Name</legend>
        <label for="hostName">Host Name:</label>
        <input type="text" id="hostName" name="hostName">
    </fieldset>

    <!-- CO2 Sensor Group -->
    <fieldset>
        <legend>CO2 Sensor</legend>
        <label for="selectedCO2Sensor">Selected CO2 Sensor:</label>
        <input type="number" id="selectedCO2Sensor" name="selectedCO2Sensor">
    </fieldset>

    <!-- Sensor Debug Group -->
    <fieldset>
        <legend>Sensor Debug</legend>
        <label for="debugSensors">Debug Sensors:</label>
        <input type="checkbox" id="debugSensors" name="debugSensors">
    </fieldset>

    <!-- Display Preferences Group -->
    <fieldset>
        <legend>Display Preferences</legend>
        <label for="displayShowTemperature">Display Show Temperature:</label>
        <input type="checkbox" id="displayShowTemperature" name="displayShowTemperature">
        <label for="displayShowHumidity">Display Show Humidity:</label>
        <input type="checkbox" id="displayShowHumidity" name="displayShowHumidity">
        <label for="displayShowBattery">Display Show Battery:</label>
        <input type="checkbox" id="displayShowBattery" name="displayShowBattery">
        <label for="displayShowCO2">Display Show CO2:</label>
        <input type="checkbox" id="displayShowCO2" name="displayShowCO2">
        <label for="displayShowPM25">Display Show PM25:</label>
        <input type="checkbox" id="displayShowPM25" name="displayShowPM25">
    </fieldset>

    <button type="button" onclick="savePreferences()">Save Preferences</button>
</form>

<script>
    function savePreferences() {
        // Collect preferences data from the form
        var preferencesData = {};
        // Populate preferencesData with form values
        // ...

        // Send the preferences data to the server
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/savePreferences", true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.send(JSON.stringify(preferencesData));

        // Handle the response from the server
        xhr.onload = function () {
            if (xhr.status === 200) {
                alert("Preferences updated successfully!");
            } else {
                alert("Error updating preferences. Please try again.");
            }
        };
    }
</script>

</body>
</html>
